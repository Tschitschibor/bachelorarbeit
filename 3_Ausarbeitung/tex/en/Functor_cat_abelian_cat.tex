\label{sect:abelian_cat}
Goal is to show that

The functor category with values in $\kmat$ is an Abelian category with enough projectives (constructively) and direct sum decomposition (constructively).

\subsection{$\kmat$ is an abelian category}

\begin{definition}[The functor category $\HomAkmat$]
Let $\Bbbk$ be a commutative ring, and let $\mathcal{A}$ be a finite-dimensional algebroid over $\Bbbk$.\\
The \ul{functor category} $\HomAkmat$ has as objects $\Bbbk$-linear functors $F : \mathcal{A} \rightarrow \kmat \in \HomAkmat_{0}$, where each
object $i \in \mathcal{A}$ gets mapped to a natural number $F(i) \in \kmat_{0} = \mathbb{N}_{0}$, and each
morphism $b : i \rightarrow j \in \mathcal{A}_{1}$ gets mapped to an $F(i) \times F(j)$ matrix $F(b) : F(i) \rightarrow F(j) \in \kmat_{1}$.
A morphism $\alpha : F \rightarrow G \in \HomAkmat_{1}$ is a natural transformation $\alpha : F \Rightarrow G$ with each component
$\alpha_{i} : F(i) \rightarrow G(i) \in \kmat_{1}$ for an object $i \in \mathcal{A}$ being a $F(i) \times G(i)$ matrix satisfying the
naturality conditions in \eqref{eq:naturality_condition}.
\end{definition}

\begin{example}[Limits and colimits in $\kmat$]
In our target category $\kmat$ which is an abelian category, we have the following limits, colimits and special bilimts:
\begin{itemize}
\item A zero object $0 \in \kmat_{0}$
\item For every finite set $I$ and family $\{S_{i}\}_{i \in I}$ we have the direct sum
\[
(S = \bigoplus_{i\in I} S_{i}, \{\pi_{i} : S \rightarrow S_{i}\}, \{\iota_{i} : S_{i} \rightarrow S\}, u_{\text{in}}(\tau), u_{\text{out}}(\tau))
\]
\item An equalizer of the diagram 
\[
\begin{tikzcd}
A \arrow[rr, "{0_{A,B}}"', shift right] \arrow[rd] \arrow[rr, "\alpha", shift left] &              & B \\
                                                                               & 0 \arrow[ru] &  
\end{tikzcd}
\]
called kernel, i.e. for the matrix $\alpha : A \rightarrow B$ we have
\[
(K = \mathrm{ker}(\alpha), \mathrm{KernelEmbedding}(\alpha), \mathrm{KernelLift}(\alpha,\tau))
\]
\[
\begin{tikzcd}
K \arrow[rrr, "{\mathrm{KernelEmbedding}(\alpha)}", hook]                              &  &  & A \arrow[r, "\alpha"] & B \\
T \arrow[rrru, "\tau"', bend right] \arrow[u, "{\mathrm{KernelLift}(\alpha,\tau)}", dashed] &  &  &                       &  
\end{tikzcd}
\]
\item A co-equalizer of the same diagram called cokernel, i.e. for the matrix $A \in \Bbbk^{m\times n}$ we have
\[
(C = \mathrm{coker}(\alpha), \mathrm{CokernelProjection}(\alpha), \mathrm{CokernelColift}(\alpha,\tau))
\]
\[
\begin{tikzcd}
C \arrow[d, "{\mathrm{CokernelColift}(\alpha,\tau)}"', dashed] &  &  & B \arrow[lll, "\mathrm{CokernelProjection}(\alpha)"', two heads] \arrow[llld, "\tau", bend left] & A \arrow[l, "\alpha"'] \\
T                                                              &  &  &                                                                                       &                       
\end{tikzcd}
\]


\end{itemize}
\end{example}

\begin{example}[Lift along mono and colift along epi]
In an abelian category there exist lifts along monos and colifts along epis, more precisely there exist two dependent functions:
\begin{itemize}
\item A dependent function $( - / - )$ mapping a pair $\iota : K \rightarrow A, \tau : T \rightarrow A$ to a lift $(\tau / \iota )$ of
$\tau$ along $\iota$, where $A, K, T \in \kmat_{0}$, 

$\iota$ is a monomorphism and 

$\tau\,\mathrm{CokernelProjection}(\iota) = 0$.

\item A dependent function $( - \backslash - )$ mapping a pair $\varepsilon : A \rightarrow C, \tau : A \rightarrow T$ to a colift
$(\varepsilon \backslash \tau )$ of
$\tau$ along $\varepsilon$, where $A, C, T \in \kmat_{0}$,

$\varepsilon$ is an epimorphism and

$\mathrm{KernelEmbedding}(\varepsilon)\tau = 0$.

\end{itemize}
Lifts along monos and colifts along epis are unique.
\end{example}

\begin{remark}
The existence of lifts along monos and colifts along epis is equivalent to \ref{def:abelian_category}.
\end{remark}
\begin{proof}

Each mono is a kernel embedding, each epi is cokernel projection.
\end{proof}


Our category $\HomAkmat$ has all of these limits.

\subsection{$\HomAkmat$ is an abelian category}

\begin{theorem}\label{thm:functor_category_abelian}
Let $\mathcal{A}$ be a finite-dimensional algebroid over some field $\Bbbk$. The functor category $\HomAkmat$
is an abelian category.
\end{theorem}
\begin{proof}
We prove that $\HomAkmat$ is an Ab-category, then that it is also an additive category and a pre-abelian category and finally that
it is an abelian category.
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item In order to show that $\HomAkmat$ is an Ab-category, we must show that 
\begin{enumerate}
\renewcommand{\labelenumii}{(\roman{enumii})}
\item for any two objects $F,G \in \HomAkmat_{0}$ the hom-set $\mathrm{Hom}_{\HomAkmat}(F,G)$ between them is an Abelian group, and
\item that the composition of two morphisms\\
$\mu : \mathrm{Hom}_{\HomAkmat}(F,G) \times \mathrm{Hom}_{\HomAkmat}(G,H) \rightarrow \mathrm{Hom}_{\HomAkmat}(F,H)$ is a
bilinear map, i.e. for $\eta, \varepsilon \in \mathrm{Hom}_{\HomAkmat}(F,G)$ and $\varphi, \psi \in \mathrm{Hom}_{\HomAkmat}(G,H)$ and
for $x \in \Bbbk$
\begin{align}
(\eta + \varepsilon)\varphi &= \eta\varphi + \varepsilon\varphi \\
\eta(\varphi + \psi) &= \eta\varphi + \eta\psi \\
(x\eta)\varphi &= \eta(x\varphi) = x(\eta\varphi).
\end{align}
\end{enumerate}

\begin{subproof}[Proof of (i)]
For any object $c \in \mathcal{A}$, the set of components $\mathrm{Hom}_{\kmat}(Fc,Gc)$ is a $\Bbbk$-vector space and therefore an
Abelian group.

We define the addition and scalar multiplication
\begin{align*}
+ :&& \mathrm{Hom}_{\HomAkmat}(F,G) &\times \mathrm{Hom}_{\HomAkmat}(F,G) \rightarrow \mathrm{Hom}_{\HomAkmat}(F,G)\\
\cdot :&& \Bbbk &\times \mathrm{Hom}_{\HomAkmat}(F,G) \rightarrow \mathrm{Hom}_{\HomAkmat}(F,G)
\end{align*}
component-wise: $\forall \eta, \varepsilon \in \mathrm{Hom}_{\HomAkmat}(F,G), \forall x \in \Bbbk, \forall c \in \mathcal{A}$
\begin{align}
(\eta+\varepsilon)_{c} &:= \eta_{c} + \varepsilon_{c}\\
(x \eta)_{c} &:= x\eta_{c}
\end{align}
where the right-hand side is the usual addition and scalar multiplication of matrices.

We identify as the neutral element $0_{F,G} \in \mathrm{Hom}_{\HomAkmat}(F,G)$ (or simply $0$ when the context is clear)
the natural transformation $0$ with each component $0_{c} = 0_{Fc,Gc}$ being the $Fc\times Gc$ zero matrix.
For each natural transformation $\eta$ the additive inverse $-\eta$ is defined component-wise as
\begin{align}
(-\eta)_{c} &:= -\eta_{c}.
\end{align}
We also confirm that the addition is commutative:
\begin{align}
(\eta+\varepsilon)_{c} &= \eta_{c} + \varepsilon_{c}\\
    &= \varepsilon_{c} + \eta_{c}\\
    &= (\varepsilon + \eta)_{c}
\end{align}
This concludes that for each $F, G \in \HomAkmat,\, \mathrm{Hom}_{\HomAkmat}(F,G)$ is an Abelian group.
\end{subproof}
\begin{subproof}[Proof of (ii)]
Let $F, G, H \in \HomAkmat$ and let $\eta, \varepsilon \in \mathrm{Hom}_{\HomAkmat}(F,G)$,
$\varphi, \psi \in \mathrm{Hom}_{\HomAkmat}(G,H)$ and $x \in \Bbbk$.\\
The composition $\eta\varphi \in \mathrm{Hom}_{\HomAkmat}(F,H)$ is defined by component-wise matrix-multiplication,
i.e. $\forall c \in \mathcal{A}$
\begin{align*}
(\eta\varphi)_{c} := \eta_{c}\varphi_{c}
\end{align*}
and from this follows the bilinearity of the composition, since the matrix multiplication is bilinear.\\
This concludes the first part of the proof, i.e. $\HomAkmat$ is an Ab-category.
\end{subproof}

\item Next we show that $\HomAkmat$ is an additive category, i.e. it is
\begin{enumerate}
\renewcommand{\labelenumii}{(\roman{enumii})}
\item An Ab-category with
\item A dependent function $\oplus$ mapping a finite set $I$ and a collection $(F_{i})_{i\in I}$ of objects in $\HomAkmat$
to a corresponding direct sum $( \oplus_{i\in I} F_{i}, (\pi_{i})_{i\in I}, (\iota_{i})_{i\in I}, u_{\mathrm{in}}, u_{\mathrm{out}} )$.
\end{enumerate}
\begin{subproof}[Proof of (ii)]
We will make extensive use of the direct sum in $\kmat$ as described in \ref{ex:kmat_additive} and \ref{ex:block_diagonal_matrix} to
define the direct sum in $\HomAkmat$.
Let $I = \{1,\dots,N\}$ be a finite set, and $\{F_{i} \}_{i \in I}$ a family of objects in $\HomAkmat_{0}$.
\begin{itemize}
\item The object $F := \oplus_{i \in I} F_{i}$ is a functor defined by its image on objects $c \in \mathcal{A}_{0}$ and its
image on morphisms $a : c \rightarrow c' \in \mathcal{A}_{1}$ in the following way:
\begin{itemize}
\item For an object $c \in \mathcal{A}_{0}$ we have a family $\{F_{i} c \}_{i \in I}$ of objects in $\kmat_{0}$ for which we can define
their direct sum $\oplus_{i \in I} F_{i} c = \sum_{i \in I} F_{i} c =: F c$.
\item The projections $\pi_{i} : F \rightarrow F_{i}$ and coprojections $\iota_{i} : F_{i} \rightarrow F$ are defined component-wise
exactly as in \eqref{eq:projection_direct_sum_matrix} and \eqref{eq:coprojection_direct_sum_matrix}, i.e.
\begin{align}
(\pi_{i})_{c} =
\begin{pmatrix}
0_{\sum_{j=1}^{i-1} F_{j}(c), F_{i}(c)} \\
1_{F_{i}(c)} \\
0_{\sum_{j=i+1}^{N} F_{j}(c), F_{i}(c)}
\end{pmatrix} \\
(\iota_{i})_{c} = 
\begin{pmatrix}
0_{F_{i}(c),\,\sum\limits_{j=1}^{i-1} F_{j}(c)} & 1_{F_{i}(c)} & 0_{F_{i}(c),\,\sum\limits_{j=i+1}^{N} F_{j}(c)}
\end{pmatrix}
\end{align}

We verify the property of a direct sum, that

\begin{align}
\sum_{i \in I} (\pi_{i}) (\iota_{i}) &= 1_{F}\,\text{ and } \\
(\iota_{i}) (\pi_{j}) &= (\delta_{i,j}) = \begin{cases}
1_{F_{i}} & \text{ if } i = j \\
0_{F_{i}, F_{j}} & \text{ if } i \neq j
\end{cases}
\end{align}
which again can be checked component-wise
\begin{align}
\sum_{i \in I} (\pi_{i})_{c} (\iota_{i})_{c} &= 1_{Fc}\,\text{ and } \\
(\iota_{i})_{c}(\pi_{j})_{c} &= (\delta_{i,j})_{c} = \begin{cases}
1_{F_{i}c} & \text{ if } i = j \\
0_{F_{i}c, F_{j}c} & \text{ if } i \neq j
\end{cases}
\end{align}

\item For a morphism $a : c \rightarrow c' \in \mathcal{A}_{1}$ we have a family of morphisms 
$\{F_{i} a : F_{i} c \rightarrow F_{i} c'\}_{i \in I}$. Analogous to \ref{ex:block_diagonal_matrix} we define

\begin{align}
F a := \sum_{i \in I} (\pi_{i})_{c} F_{i} a (\iota_{i})_{c'} : Fc \rightarrow Fc'
\end{align}
which satisfies
\begin{align}
(\iota_{i})_{c} Fa (\pi_{i})_{c'} &= (\iota_{i})_{c} \sum_{j \in I} (\pi_{j})_{c} F_{j} a (\iota_{j})_{c'} (\pi_{i})_{c'} \\
&= \sum_{j \in I} (\iota_{i})_{c} (\pi_{j})_{c} F_{j} a (\iota_{j})_{c'}(\pi_{i})_{c'} \\
&= \sum_{j \in I} (\delta_{i,j})_{c} F_{j} a (\delta_{j,i})_{c'} \\
&= 1_{F_{i} c} F_{i} a 1_{F_{i} c'} \\
&= F_{i} a
\end{align}
\end{itemize}
This defines how $F$ works on objects and on morphisms.

\item For a family $\tau = \{ \tau_{i} : G \rightarrow F_{i} \}_{i \in I}$ of natural transformations with the same source
$G \in \HomAkmat_{0}$ we have for each object $c \in \mathcal{A}_{0}$ a family
$\tau_{c} = \{ (\tau_{i})_{c} : Gc \rightarrow F_{i}c \}_{i \in I}$ of morphisms in $\kmat_{1}$ with same source $Gc \in \kmat_{0}$.
For these we have by \eqref{eq:u_in_direct_sum_matrix} the morphism $u_{\text{in}}(\tau_{c}) : Gc \rightarrow Fc$ such that
\begin{align}
u_{\text{in}}(\tau_{c}) (\pi_{i})_{c} =
(\tau_{i})_{c}
\end{align}
We can thus define the natural transformation $u_{\text{in}}(\tau) : G \rightarrow F \in \HomAkmat_{1}$ by the components
\begin{align}
(u_{\text{in}}(\tau))_{c} := u_{\text{in}}(\tau_{c})
\end{align}
and we can verify that $u_{\text{in}}(\tau) (\pi_{i})$ is the natural transformation with components
\begin{align}
(u_{\text{in}}(\tau) (\pi_{i}))_{c} &= (u_{\text{in}}(\tau))_{c} (\pi_{i})_{c} \\
&= u_{\text{in}}(\tau_{c}) (\pi_{i})_{c} \\
&= (\tau_{i})_{c}
\end{align}
per definition, i.e. $u_{\text{in}}(\tau)$ is the natural transformation fulfilling $u_{\text{in}}(\tau) (\pi_{i}) = \tau_{i}$.
\item Analogous for a family $\rho = \{ \rho_{i} : F_{i} \rightarrow H \}$ of natural transformations with the same target
$H \in \HomAkmat_{0}$ we have for each object $c \in \mathcal{A}_{0}$ a family
$\rho_{c} = \{ (\rho_{i})_{c} : F_{i} c \rightarrow Hc \}_{i \in I}$ and get the
natural transformation $u_{\text{out}}(\rho) : F \rightarrow H \in \HomAkmat_{1}$ with components
\begin{align}
(u_{\text{out}}(\rho))_{c} := u_{\text{out}}(\rho_{c})
\end{align}
fulfilling $\iota_{i} u_{\text{out}}(\rho) = \rho_{i}$.
\end{itemize}

All in all we have 

\begin{align*}
\forall c \in \mathcal{A}_{0},&& &&  (\oplus_{i \in I} F_{i}) c &= \oplus_{i \in I} (F_{i} c) \\
\forall c \in \mathcal{A}_{0},&& \forall i \in I,&& (\pi_{i} : F \rightarrow F_{i})_{c} &= (\pi_{i})_{c} : Fc \rightarrow F_{i} c \\
\forall c \in \mathcal{A}_{0},&& \forall i \in I,&& (\iota_{i} : F_{i} \rightarrow F)_{c} &= (\iota_{i})_{c} : F_{i} c \rightarrow Fc \\
\forall c \in \mathcal{A}_{0},&& \forall \tau = \{ \tau_{i} : G \rightarrow F_{i} \}_{i = 1,\dots,n},&&
(u_{\mathrm{in}}(\tau))_{c} &= u_{\mathrm{in}}(\tau_{c}) \\
\forall c \in \mathcal{A}_{0},&& \forall \rho = \{ \rho_{i} : F_{i} \rightarrow H \}_{i = 1,\dots,n},&&
(u_{\mathrm{out}}(\rho))_{c} &= u_{\mathrm{out}}(\rho_{c})
\end{align*}

where $\tau_{c} = \{ (\tau_{i})_{c} : Gc \rightarrow F_{i}c \}_{i \in I}$ and $\rho_{c} = \{ (\rho_{i})_{c} : F_{i} c \rightarrow Hc \}_{i \in I}$.

\end{subproof}

\item Next we show that $\HomAkmat$ is a pre-abelian category, i.e. an
\begin{enumerate}
\renewcommand{\labelenumii}{(\roman{enumii})}
\item additive category with
\item a dependent function mapping a morphism $\eta : F \rightarrow G \in \HomAkmat_{1}$ to a kernel of $\eta$ and
\item a dependent function mapping a morphism $\eta : F \rightarrow G \in \HomAkmat_{1}$ to a cokernel of $\eta$.
\end{enumerate}
\begin{subproof}
In $\kmat$ the morphism $\eta_{c} : Fc \rightarrow Gc$ has a kernel and a cokernel given by
\begin{itemize}
\item $\mathrm{KernelObject}(\eta_{c})$
\item $\mathrm{KernelEmbedding}(\eta_{c})$
\item $\mathrm{KernelLift}(\eta_{c},\tau_{c})$
\item $\mathrm{CokernelObject}(\eta_{c})$
\item $\mathrm{CokernelProjection}(\eta_{c})$
\item $\mathrm{CokernelColift}(\eta_{c},\tau_{c})$
\end{itemize}
\end{subproof}

\item Finally to show that $\HomAkmat$ is an abelian category, we need to show that it is
\begin{enumerate}
\renewcommand{\labelenumii}{(\roman{enumii})}
\item a pre-abelian category with
\item a dependent function $(-/-)$
\item a dependent function $(-\backslash -)$
\end{enumerate}
\begin{subproof}
In $\kmat$ we have
\begin{itemize}
\item $\mathrm{LiftAlongMonomorphism}(\kappa,\tau)$
\item $\mathrm{ColiftAlongEpimorphism}(\epsilon,\tau)$
\end{itemize}
\end{subproof}
\end{enumerate}
\end{proof}
