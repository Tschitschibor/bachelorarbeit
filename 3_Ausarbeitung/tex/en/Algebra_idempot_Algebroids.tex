

\subsection{Finite concrete categories and the free/forgetful adjunction}\label{sec:fin_concrete_cat_free_forgetful}

Our model for a finite concrete category $\mathcal{C}$ is that of a finite subcategory of $\FinSets$. In particular we restrict ourselves
to finite concrete categories that are generated by a finite set of morphisms $\mathtt{SetOfGeneratingMorphisms}$ and whose endomorphism
monoids are explicitly cyclic.

The $\mathtt{SetOfGeneratingMorphisms} = \{ a_{1},a_{2},\dots,a_{n} \}$ already defines a finite quiver:

\begin{definition}{(Finite quiver generated by a finite set of morphisms)}\label{def:quiver_generated}
Let $M = \{ a_{1}, a_{2}, \dots, a_{n} \}$ be a finite set of morphisms. We say a quiver $q$ is \ul{generated by $M$}, if
\begin{align}
q_{1} &= M, \text{ and } \\
q_{0} &= \{ o : \exists a \in M, s(a) = o \vel t(a) = o \}
\end{align}
In this case the quiver $q$ is finite.
\end{definition}

The fact that every category is also a quiver can be expressed in the following as the existence of a certain forgetful functor:

\begin{example}{(Forgetful functor $U : \mathcal{C} \rightarrow \mathcal{D}$)}
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item We denote by the letter $U$ (for \textit{underlying}) a \ul{forgetful functor} between two categories $U : \mathcal{C} \rightarrow \mathcal{D}$ if
we can identify every object $c \in \mathcal{C}$ as an object $Uc \in \mathcal{D}$ by \textit{forgetting} some additional structure that $c$ had
in $\mathcal{C}$ but that is not defined for objects in $\mathcal{D}$. The object $Uc$ is called the \ul{underlying object} of $c$ (e.g. the
\ul{underlying set} of a group).
\item For a morphism $a : c \rightarrow c' \in \mathcal{C}$ that was some structure-preserving map between $c$ and $c'$, if that structure doesn't
exist in the category $\mathcal{D}$ then $Ua : Uc \rightarrow Uc'$ \textit{forgets} the structure-preserving property of $a$.
\item There are other conceivable functors that even map morphisms between two objects
(e.g. functors between two categories are morphisms in $\mathrm{\textbf{Cat}}$) to objects (e.g. functors in the functor category). If you now
want to get back the morphism from the object, you again are using a forgetful functor (e.g. to get the \ul{underlying functor} of the functor object).
\end{enumerate}
Some authors define a forgetful functor in the strict sense that its target category $\mathcal{D} = \mathrm{\textbf{Set}}$, i.e. it forgets all structure;
and functors that only forget some but not all of the algebraic structure are called \ul{intermediate forgetful functors}.
\end{example}

\noindent We are interested in the forgetful functor with $\mathcal{C} = \Cat$ and $\mathcal{D} = \Quiv$:

\begin{example}{(Forgetful functor $U  : \Cat \hookrightarrow \Quiv$)}
Let $\mathcal{C} \in \Cat$ be a category. The quiver $q = U\mathcal{C}$ is defined by
\begin{align}
q_{0} &= \mathcal{C}_{0} \\
q_{1} &= \mathcal{C}_{1}
\end{align}
In particular every identity morphism $1_{c} \in \mathcal{C}_{1}$ for an object $c \in \mathcal{C}$ now is just any other endomorphism
on that object (but it is still true that $s(1_{c}) = t(1_{c}) = c$).
And every morphism $\varphi\psi \in \mathcal{C}_{1}$ that was the composition of $\varphi$ with $\psi$ is now just
any morphism without much deeper connection to $\varphi$ and $\psi$ apart from
\begin{align}
s(\varphi\psi) &= s(\varphi) \text{ and } \\
t(\varphi\psi) &= t(\psi),
\end{align}
which is still true in $\Quiv$. Of course, associativity and unital property of the composition $\mu$ doesn't exist in $\Quiv$ since there is no composition
of arrows.
\end{example}

\begin{example}{(Underlying quiver)}\label{ex:underlying_quiver}\\

\noindent\begin{minipage}{.08\textwidth}
\phantom{}
\end{minipage}
\begin{minipage}{.37\textwidth}
\begin{tikzcd}[boxedcd={inner xsep=1.5em, inner ysep=3em}]
2 \arrow[rrrr, "b"] \arrow[rrrrddd, "e", pos=0.3] \arrow["h"', loop, distance=2em, in=125, out=55] &  &  &  &
3 \arrow[ddd, "c"] \arrow["i"', loop, distance=2em, in=125, out=55]\\
 &  &  &  & \\
 &  &  &  & \\
1 \arrow[uuu, "a"] \arrow[rrrruuu, "d", pos=0.3] \arrow[rrrr, bend left, "f" ', shift right=2]
\arrow[rrrr, "f", bend right] \arrow["g"', loop, distance=2em, in=305, out=235] &  &  &  &
4 \arrow["j"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.10\textwidth}
\center$\xhookleftarrow{\text{   U   }}$
\end{minipage}
%
\begin{minipage}{.37\textwidth}
\begin{tikzcd}[boxedcd={inner xsep=1.5em, inner ysep=3em}]
B \arrow[rrrr, "\psi"] \arrow[rrrrddd, "\psi\rho", pos=0.3] \arrow["1_{B}"', loop, distance=2em, in=125, out=55] &  &  &  &
C \arrow[ddd, "\rho"] \arrow["1_{C}"', loop, distance=2em, in=125, out=55]\\
 &  &  &  & \\
 &  &  &  & \\
A \arrow[uuu, "\varphi"] \arrow[rrrruuu, "\varphi\psi", pos=0.3] \arrow[rrrr, bend left, "(\varphi\psi)\rho" ', shift right=2]
\arrow[rrrr, "\varphi(\psi\rho)", bend right] \arrow["1_{A}"', loop, distance=2em, in=305, out=235] &  &  &  &
D \arrow["1_{D}"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
\begin{minipage}{.08\textwidth}
\phantom{}
\end{minipage}\\

\noindent In the category on the right, associativity of composition guaranteed that $(\varphi\psi)\rho = \varphi(\psi\rho)$, so those two arrows
were already the same, so they are mapped to the same arrow $f = U((\varphi\psi)\rho) = U(\varphi(\psi\rho))$ in the quiver on the left.
We didn't have to draw both arrows for $f$, but since they are equal, there is still only one arrow in the hom-set $\textup{Hom}_{q}(1,4)=\{f,f\} = \{f\}$.\\
All the other identities are not preserved under the forgetful functor, e.g. $d$ doesn't know what it has to do with $a$ and $b$ apart from
$s(d) = s(a)$ and $t(d) = t(b)$. Especially the former identity arrows are now just endomorphisms with no defining property.\\
The paths $g^{2}f, gf$ and $fj^{3}$ are all different, while in the category, they all simplify to
$1_{A}1_{A}(\varphi\psi)\rho = 1_{A}(\varphi\psi)\rho = (\varphi\psi)\rho1_{D}1_{D}1_{D} =  (\varphi\psi)\rho$ due to the unit property and associativity.
\end{example}

The category $\mathcal{C}$ in the last example has the set of morphisms $\mathcal{C}_{1} =
\{ 1_{A}, 1_{B}, 1_{C}, 1_{D}, \varphi, \psi, \rho, \varphi\psi, \psi\rho, \varphi\psi\rho \}$, i.e. 10 morphisms. But once the three morphisms
$\varphi, \psi$ and $\rho$ were defined, the other seven morphisms were forced from the unit and composition axioms of a category.

\begin{example}{(Category generated by one endomorphism)}\label{ex:category_generated_by_one_endomorphism}
As another example, take a category $\mathcal{M}$ with one object $\ast$ and apart from $1_{\ast}$ one other endomorphism
$\alpha : \ast \rightarrow \ast$. It already has a priori countably infinitely many morphisms
$\mathcal{M}_{1} = \{ 1_{\ast}, \alpha, \alpha^{2}, \alpha^{3}, \dots \}$. But the information to generate that category is all encoded in the
one morphism $\alpha$.
\end{example}

What we are looking for is a construction of a finite concrete category from a finite set of generating morphisms. For this we can take
the generated quiver from \ref{def:quiver_generated} and from it the free category.

\begin{definition}{(The free category $F : \Quiv \rightarrow \Cat$)}\label{def:free_category}\endnote{(ref. \cite{[context]} Example 4.1.13)}
The \ul{free category} $Fq$ of a quiver $q$ has $q_{0}$ as its set of objects. The set $(Fq)_{1}$ of morphisms consists of all finite paths of arrows in
$q_{1}$. The identity morphism $1_{c}$ of an object $c \in q_{0}$ is defined as the empty path from $c$ to itself. Composition is defined by
concatenation of paths.
\end{definition}

\begin{definition}{(Free $\dashv$ forgetful adjunction)}
The functor pair $F : \Quiv \leftrightarrows \Cat : U$ is an example for an adjunction, i.e. for the functors $F : \Quiv \rightarrow \Cat$ and
$U : \Cat \rightarrow \Quiv$ there is an isomorphism
\begin{align}
\mathrm{Hom}_{\Cat}(Fq, \mathcal{C}) &\cong \mathrm{Hom}_{\Quiv}(q,U\mathcal{C})
\end{align}
for each $q \in \Quiv$ and $\mathcal{C} \in \Cat$, that is natural in both $q$ and $\mathcal{C}$. Here $U$ is \ul{right adjoint} to $F$ and
the forgetful functor $U$ admits a \ul{left adjoint}, free construction $F$.
\end{definition}

We can view the free category functor in action in two different ways: Where does the category $\mathcal{C}$ in example \ref{ex:underlying_quiver}
come from, i.e. what is the quiver $q$ such that $\mathcal{C} = Fq$? And where does it go after we forget the category structure, i.e. what is
the category $F(U(\mathcal{C}))$? We will illustrate the answers to both questions in the next example:

\begin{example}{(Generating quiver $\xrightarrow{F}$ category $\xrightarrow{U}$ underlying quiver $\xrightarrow{F}$ category)}
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item The free category generated by the quiver:
\[
\noindent\begin{minipage}{.08\textwidth}
\phantom{}
\end{minipage}
%
\begin{minipage}{.37\textwidth}
\begin{tikzcd}[boxedcd={inner xsep=1.5em, inner ysep=3em}]
B \arrow[rrrr, "\psi"] &  &  &  & C \arrow[ddd, "\rho"] \\
 &  &  &  & \\
 &  &  &  & \\
A \arrow[uuu, "\varphi"] &  &  &  & D
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.10\textwidth}
\center$\xrightarrow{\text{     }F\text{     }}$
\end{minipage}
%
\begin{minipage}{.37\textwidth}
\begin{tikzcd}[boxedcd={inner xsep=1.5em, inner ysep=3em}]
B \arrow[rrrr, "\psi"] \arrow[rrrrddd, "\psi\rho", pos=0.3] \arrow["1_{B}"', loop, distance=2em, in=125, out=55] &  &  &  &
C \arrow[ddd, "\rho"] \arrow["1_{C}"', loop, distance=2em, in=125, out=55]\\
 &  &  &  & \\
 &  &  &  & \\
A \arrow[uuu, "\varphi"] \arrow[rrrruuu, "\varphi\psi", pos=0.3] \arrow[rrrr, bend left, "(\varphi\psi)\rho" ', shift right=2]
\arrow[rrrr, "\varphi(\psi\rho)", bend right] \arrow["1_{A}"', loop, distance=2em, in=305, out=235] &  &  &  &
D \arrow["1_{D}"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
\begin{minipage}{.08\textwidth}
\phantom{}
\end{minipage}
\]
\item The free category generated by the underlying quiver:
\[
\noindent\begin{minipage}{.08\textwidth}
\phantom{}
\end{minipage}
\begin{minipage}{.37\textwidth}
\begin{tikzcd}[boxedcd={inner xsep=1.5em, inner ysep=3em}]
2 \arrow[rrrr, "b"] \arrow[rrrrddd, "e", pos=0.3] \arrow["h"', loop, distance=2em, in=125, out=55] &  &  &  &
3 \arrow[ddd, "c"] \arrow["i"', loop, distance=2em, in=125, out=55]\\
 &  &  &  & \\
 &  &  &  & \\
1 \arrow[uuu, "a"] \arrow[rrrruuu, "d", pos=0.3] \arrow[rrrr, bend left, "f" ', shift right=2]
\arrow["g"', loop, distance=2em, in=305, out=235] &  &  &  &
4 \arrow["j"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.10\textwidth}
\center$\xrightarrow{\text{     }F\text{     }}$
\end{minipage}
%
\begin{minipage}{.37\textwidth}
\begin{tikzcd}[boxedcd={inner xsep=3em, inner ysep=3em}]
2 \arrow[rrrr, "b"] \arrow[rrrrddd, "e", pos=0.75] \arrow["h"', loop, distance=2em, in=125, out=55] \arrow["1_{2}"', loop, distance=2em, in=215, out=145] \arrow[rrrrddd, "bc", pos=0.75, shift left=5]                                                                                                                                                                                                                                                                                       &  &  &  & 3 \arrow[ddd, "c"] \arrow["i"', loop, distance=2em, in=125, out=55] \arrow["1_{3}"', loop, distance=2em, in=35, out=325] \\
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          &  &  &  &                                                                                                                          \\
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          &  &  &  &                                                                                                                          \\
1 \arrow[uuu, "gah"', pos=0.65, shift right=3] \arrow[rrrruuu, "d", pos=0.75] \arrow[rrrr, "f", bend left, shift right=2] \arrow[rrrr, "abc", bend right] \arrow["g"', loop, distance=2em, in=305, out=235] \arrow["1_{1}"', loop, distance=2em, in=215, out=145] \arrow[uuu, "ah" description, pos=0.6] \arrow[uuu, "ga" description, pos=0.45, shift left=3] \arrow[uuu, "a" description, pos=0.3, shift left=6] \arrow[rrrruuu, "ab", pos=0.67, shift left=6] \arrow[rrrr, "dc", shift right=3] \arrow[rrrr, "ae", shift left=2] &  &  &  & 4 \arrow["j"', loop, distance=2em, in=305, out=235] \arrow["1_{4}"', loop, distance=2em, in=35, out=325]                
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.08\textwidth}
\phantom{}
\end{minipage}
\]
As you can see, this picture gets cluttered very fast (I didn't draw all morphisms). The reason for this is the existence of non-identity endomorphisms.
As we have shown in lemma \ref{la:cyclic_paths}, one non-identity endomorphism is enough for a quiver to have infinitely many paths.
Here it is even worse than in the example \ref{ex:category_generated_by_one_endomorphism} where we had countably many endomorphisms
$\alpha^{n}, n \in \mathbb{N}$. Through the arrow $a : 1 \rightarrow 2$ we can concatenate countably many morphisms
$g^{m}ah^{n}, (m,n) \in \mathbb{N}\times\mathbb{N}$ and even $g^{n_{1}}ah^{n_{2}}bi^{n_{3}}cj^{n_{4}}, (n_{1}, n_{2}, n_{3}, n_{4}) \in \mathbb{N}^{4}$.
If we were to construct the path algebra (see \ref{def:path_algebra}) on the quiver, it already had an infinite basis.
\end{enumerate}
\end{example}

\begin{example}{(Continued example \ref{ex:category_generated_by_one_endomorphism})}\label{ex:U-F-U-F_from_singleton}\\

As a last example to see how bad it can get from seemingly innocent quivers, take the category with 1 object and its identity morphism:
\[
\noindent\begin{minipage}{.005\textwidth}
\phantom{}
\end{minipage}
\begin{minipage}{.08\textwidth}
\begin{tikzcd}
\ast \arrow["1_{\ast}"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.05\textwidth}
$\xrightarrow{\text{     }U\text{     }}$
\end{minipage}
%
\begin{minipage}{.08\textwidth}
\begin{tikzcd}
\ast \arrow["a"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.05\textwidth}
$\xrightarrow{\text{     }F\text{     }}$
\end{minipage}
%
\begin{minipage}{.15\textwidth}
\begin{tikzcd}
\ast \arrow["a"', loop, distance=2em, in=305, out=235] \arrow["1_{\ast}"', loop, distance=2em, in=125, out=55] \arrow["{a^{2}, a^{3},\dots}"', loop, distance=2em, in=35, out=325]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.05\textwidth}
$\xrightarrow{\text{     }U\text{     }}$
\end{minipage}
%
\begin{minipage}{.08\textwidth}
\begin{tikzcd}
\ast \arrow["{a, b, c,\dots}"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.05\textwidth}
$\xrightarrow{\text{     }F\text{     }}$
\end{minipage}
%
\begin{minipage}{.25\textwidth}
\begin{tikzcd}
\ast \arrow["{a, b, c,\dots}"', loop, distance=2em, in=305, out=235] \arrow["1_{\ast}"', loop, distance=2em, in=125, out=55] \arrow["{a^{2},\dots,ab,\dots,ababbaba,\dots,b^{2},\dots,c^{2},\dots}"', loop, distance=2em, in=35, out=325]
\end{tikzcd}
\end{minipage}
\begin{minipage}{.10\textwidth}
\phantom{}
\end{minipage}
\]
After the first forgetful functor, we are in the situation of \ref{ex:category_generated_by_one_endomorphism} where then the first free functor
gives us countably many morphisms.
The following forgetful functor only renames them to countably many distinct morphisms.
In the last step, we are constructing the free monoid on countably many generators. Among other things it contains the free monoid on two
generators.\endnote{As my father rightly remarked when I showed this to him, \enquote{You can hide the whole world inside there!}}
\end{example}

We can learn two lessons from these examples:
\begin{enumerate}
\item An adjunction is more general than an equivalence of categories. The free functor $F$ doesn't just \textit{undo} the forgetful functor $U$.
You will end up with much more than you started with.
\item If we want to still work with finite categories, we really need to control the size of our hom-sets, especially regarding the endomorphisms.
This is the topic of the next section.
\end{enumerate}

\vspace{4em}

%\begin{minipage}{.01\textwidth}\phantom{}
%\end{minipage}
%
\noindent\begin{minipage}[t]{.55\textwidth}\vspace{0pt}%
\subsection{Relations of endomorphisms}
\begin{lemma}{($\sigma$-Lemma)}\label{la:sigma-lemma}
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item Let $\mathcal{C}$ be a finite concrete category. In remark \ref{rmk:endo_monoid} we showed that for each object
$M \in \mathcal{C}_{0}$ the set $\mathrm{End}_{\mathcal{C}}(M)$ is a monoid. For each endomorphism $f \in \mathrm{End}_{\mathcal{C}}(M)$
there exist $m,n \in \mathbb{N}, n\geq 1$, such that $f^{m+n}=f^{m}$.
\item When we restrict both the source and target of $f$ to $\mathrm{Im}(f^{m})$, then $f\restrict{\mathrm{Im}(f^{m})}$ is an isomorphism, i.e.
$f\restrict{\mathrm{Im}(f^{m})} \in \mathrm{Aut}_{\mathcal{C}}(\mathrm{Im}(f^{m}))$ with
$f\restrict{\mathrm{Im}(f^{m})}^{n} = 1_{\mathrm{Im}(f^{m})}$.
\item If $m = 0$ and $n \geq 1$ then $f \in \mathrm{Aut}_{\mathcal{C}}(M)$ is an automorphism with $f^{-1} = f^{n-1}$ and has order $n$.
\item An upper bound for $m$ is $\abs{M}$ and for $n$ is $g(N)$ with $N = \abs{M}$ and Landau's function\endnote{(My thanks to
Felix Potthast and Michael Figelius who both sent me in the direction of Landau's function)} $g(N)$
defined as the largest order of an element of the symmetric group $S_{N}$.
\end{enumerate}
\end{lemma}
\noindent
%m=1, n=1
\begin{minipage}[b]{.45\textwidth}
\begin{tikzpicture}[->,>=stealth',auto,node distance=1cm,
  thick,main node/.style={circle,draw,font=\sffamily\Large\bfseries}]

  % nodes on the leg of sigma
  \node[main node] (1) [circle, fill, inner sep=2pt] {};
  \node[main node] (2) [left of=1, circle, fill, inner sep=2pt] {};
  
  \path[every node/.style={font=\sffamily\small}]
  % arrows on the leg of sigma
    (1) edge[-] node [left] {} (2)
    (1) edge["$f^{0} = 1_{M}$"', pos=0.60, out=300, in=40, min distance=7mm, looseness=8] (1)
    (1) edge["$f^{1}$"', bend right] node [right] {} (2)
    (2) edge["$f^{1+1}$"', pos=0.55, out=220, in=300, min distance=7mm, looseness=8] (2);
\end{tikzpicture}
\captionof{figure}{$f$ is idempotent. $m=1$ and $n=1$.}
\end{minipage}\hfill
%
\begin{minipage}[b]{.02\textwidth}
\phantom{}
\end{minipage}
\begin{minipage}[b]{.45\textwidth}
%m=0, n=2
\begin{tikzpicture}[->,>=stealth',auto,node distance=0.5cm,
  thick,main node/.style={circle,draw,font=\sffamily\Large\bfseries}]

  % nodes on the leg of sigma
  \node[main node] (1) [circle, fill, inner sep=2pt] {};
  % draw the circle
  \node[main node] (C) [below of=1, circle, draw, inner sep=0.35cm] {};
  
  \node[main node] (2) [below of=C, circle, fill, inner sep=2pt] {};
  
  \path[every node/.style={font=\sffamily\small}]
  % arrows on the leg of sigma
    (1) edge["$f^{0} = 1_{M}$"', pos=0.32, out=40, in=100, min distance=7mm, looseness=8] (1)
    (1) edge["$f^{0+1}$"', bend right=120, min distance=11mm] node [right] {} (2)
%    (2) edge["$f^{0+2}$", pos=0.5, bend right=55] node [right] {} (1);
    (2) edge["$f^{0+2}$"', bend right=120, min distance=11mm] node [right] {} (1);
\end{tikzpicture}
\captionof{figure}{$f$ is bijective with order $2$. $m=0$ and $n=2$.}
\end{minipage}
\end{minipage}
%
\begin{minipage}{.01\textwidth}
\phantom{}
\end{minipage}
%
\begin{minipage}[t]{.45\textwidth}\vspace{0pt}
%[$\sigma$ lemma illustrated for different sizes of $m$ and $n$]
%m=3, n=5
\begin{tikzpicture}[->,>=stealth',auto,node distance=1cm,
  thick,main node/.style={circle,draw,font=\sffamily\Large\bfseries}]

  % nodes on the leg of sigma
  \node[main node] (1) [circle, fill, inner sep=2pt] {};
  \node[main node] (2) [left of=1, circle, fill, inner sep=2pt] {};
  \node[main node] (3) [left of=2, circle, fill, inner sep=2pt] {};
  \node[main node] (4) [left of=3, circle, fill, inner sep=2pt] {};
  
  % nodes on the circle of sigma
  \node[main node] (5) [above right=-0.84098cm and -1.10106cm of 4, circle, fill, inner sep=2pt] {};
  \node[main node] (6) [above right=-1.95902cm and -0.73779cm of 4, circle, fill, inner sep=2pt] {};
  \node[main node] (7) [above right=-1.95902cm and 0.43779cm of 4, circle, fill, inner sep=2pt] {};
  \node[main node] (8) [above right=-0.84098cm and 0.80106cm of 4, circle, fill, inner sep=2pt] {};
  \node[main node] (9) [above right=-0.150cm and -0.150cm of 4, circle, fill, inner sep=2pt] {};
  
  % draw the circle
  \node[main node] (C) [below of=4, circle, draw, inner sep=0.70cm] {};
  
  \path[every node/.style={font=\sffamily\small}]
  % arrows on the leg of sigma
    (1) edge[-] node [left] {} (2)
    (2) edge[-] node [left] {} (3)
    (3) edge[-] node [left] {} (4)
    (1) edge["$f^{0} = 1_{M}$"', pos=0.60, out=300, in=40, min distance=7mm, looseness=8] (1)
    (1) edge["$f^{1}$"', bend right] node [right] {} (2)
    (2) edge["$f^{2}$"', bend right] node [right] {} (3)
    (3) edge["$f^{3}$"', bend right] node [right] {} (4)
    % arrows on the circle of sigma
    (9) edge["$f^{3+1}$"', bend right=55] node [right] {} (5)
    (5) edge["$f^{3+2}$"', bend right=55] node [right] {} (6)
    (6) edge["$f^{3+3}$"', bend right=55] node [right] {} (7)
    (7) edge["$f^{3+4}$"', bend right=55] node [right] {} (8)
    (8) edge["$f^{3+5}$", pos=0.4, bend left=55] node [right] {} (9);
\end{tikzpicture}
\captionof{figure}{$\sigma$ lemma with $m=3$ and $n=5$.}
%m=1, n=10
\begin{tikzpicture}[->,>=stealth',auto,node distance=1cm,
  thick,main node/.style={circle,draw,font=\sffamily\Large\bfseries}]

  % nodes on the leg of sigma
  \node[main node] (1) [circle, fill, inner sep=2pt] {};
  \node[main node] (2) [left of=1, circle, fill, inner sep=2pt] {};
  
  % draw the circle (radius = 0.51540)
%  \node[main node] (C) [above right=-2cm and -1.5cm of 1.center, circle, draw, inner sep=1.4577cm] {};
  \node[main node] (C) [above right=-2.4cm and -2.52cm of 1.center, circle, draw, inner sep=1.0308cm] {};
  
  % nodes on the circle of sigma
  \node[main node] (3) [left of=2, circle, fill, inner sep=2pt] {};
  \node[main node] (10) [below right=1.25cm and 0.88cm of 2.center, circle, fill, inner sep=2pt] {};
  \node[main node] (5) [left=2.70cm of 10, circle, fill, inner sep=2pt] {};
  \node[main node] (8) [below=2.5cm of 2, circle, fill, inner sep=2pt] {};
  \node[main node] (7) [left of=8, circle, fill, inner sep=2pt] {};
  \node[main node] (11) [below right=0.40cm and 0.60cm of 2.center, circle, fill, inner sep=2pt] {};
  \node[main node] (4) [left=2.10cm of 11, circle, fill, inner sep=2pt] {};
  \node[main node] (9) [below=1.55cm of 11, circle, fill, inner sep=2pt] {};
  \node[main node] (6) [below=1.55cm of 4, circle, fill, inner sep=2pt] {};
  
  \path[every node/.style={font=\sffamily\small}]
    % arrows on the leg of sigma
    (1) edge[-] node [left] {} (2)
    (1) edge["$f^{0} = 1_{M}$"', pos=0.60, out=300, in=40, min distance=7mm, looseness=8] (1)
    (1) edge["$f^{1}$"', bend right] node [right] {} (2)
    % arrows on the circle of sigma
    (2) edge["$f^{1+1}$"', bend right=55] node [right] {} (3)
    (3) edge["$f^{1+2}$"', bend right=55] node [right] {} (4)
    (4) edge["$f^{1+3}$"', bend right=55] node [right] {} (5)
    (5) edge["$f^{1+4}$"', bend right=55] node [right] {} (6)
    (6) edge["$f^{1+5}$"', bend right=55] node [right] {} (7)
    (7) edge["$f^{1+6}$"', bend right=55] node [right] {} (8)
    (8) edge["$f^{1+7}$"', bend right=55] node [right] {} (9)
    (9) edge["$f^{1+8}$"', pos=0.65, bend right=55] node [right] {} (10)
    (10) edge["$f^{1+9}$"', pos=0.3, bend right=55] node [right] {} (11)
    (11) edge["$f^{1+10}$", bend left=55] node [right] {} (2);
\end{tikzpicture}
\captionof{figure}{$\sigma$ lemma with $m=1$ and $n=10$.}
\end{minipage}

\begin{proof}[Proof\nopunct]
\begin{subproof}[of (1)]
The set of all endomorphisms $\mathrm{End}_{\mathcal{C}}(M)$ of the finite set $M$ with $\abs{M} < \infty$ is also finite:
\begin{align}
\abs{\textup{End}_{\mathcal{C}}(M)} = \abs{M^{M}} = \abs{M}^{\abs{M}} < \infty.
\end{align}
Let $f \in \mathrm{End}_{\mathcal{C}}(M)$. Then $\{f^{k} : k \in \mathbb{N}_{0} \} \subseteq \textup{End}_{\mathcal{C}}(M)$ is a finite set
$\{f^{k} : k \in \mathbb{N}_{0} \} = \{f^{0},f^{1},\dots,f^{N}\}$. There is a minimal $l\in \mathbb{N}_{\geq 1}$ such that
$\{f^{0},f^{1},\dots,f^{l-1}\} = \{f^{0},f^{1},\dots,f^{l}\}$, i.e. the first repetition $f^{l} = f^{j}$ for $j \in \{0,\dots,l-1\}$. Since $l$ is the first
such number, the $j$ is also uniquely determined. With $m := j$ and $n := l-j \geq l \geq 1$ we have found $m,n$ satisfying
\begin{align}
f^{m+n} = f^{j + l-j} = f^{l} = f^{j} = f^{m}.
\end{align}
\end{subproof}
\begin{subproof}[Proof of (2).]
\begin{align*}
&f^{m+n} &&= f^{m} \\
\Rightarrow &f^{n}f^{m} &&= f^{m} \\
\Rightarrow &f^{n}(y) &&= y, \text{ if } y = f^{m}(x), x \in M \\
\Rightarrow &f^{n}(y) &&= y, \text{ if } y \in \mathrm{Im}(f^{m}) \\
\Rightarrow &f^{n} &&= 1_{\mathrm{Im}(f^{m})}
\end{align*}
The identity on $\mathrm{Im}(f^{m})$ is $1_{\mathrm{Im}(f^{m})} : \mathrm{Im}(f^{m}) \rightarrow \mathrm{Im}(f^{m})$
and maps $\mathrm{Im}(f^{m})\ni y \mapsto y \in \mathrm{Im}(f^{m})$.
Let $x \in M$ and $y := f^{m}(x)$. Then we can identify as the identity on $\mathrm{Im}(f^{m})$ the function
that maps $y \mapsto y$ iff it maps $f^{m}(x) \mapsto f^{m}(x)$.\\
For $f : \mathrm{Im}(f^{m}) \rightarrow \mathrm{Im}(f^{m})$ we have
$f^{n-1} : \mathrm{Im}(f^{m}) \rightarrow \mathrm{Im}(f^{m})$ such that for all
$x \in M$ we have $(f\,f^{n-1})(f^{m}(x)) = f^{m+n}(x) = f^{m}(x)$ and
$(f^{n-1}\,f)(f^{m}(x)) = f^{m+n}(x) = f^{m}(x)$. Therefore $f : \mathrm{Im}(f^{m}) \rightarrow \mathrm{Im}(f^{m})$
is an iso with inverse $f^{n-1}$.
\end{subproof}
\begin{subproof}[Proof of (3).]
Since $f^{m+n} = 1_{\mathrm{Im}(f^{m})}$, for $m = 0$ we have
$\mathrm{Im}(f^{0}) = \mathrm{Im}(1_{M}) = M$ and therefore
$f^{n} = 1_{M}$, i.e. $f$ is bijective with $f^{-1} = f^{n-1}$.
\end{subproof}
\begin{subproof}[Proof of (4).]
In the case of $m = 0$, the morphism $f$ is a bijective function, i.e. an element of $S_{M}$. With the obvious
bijection $M \cong \{1,\dots,N\}$ we also have a bijection of groups $\varphi : S_{M} \cong S_{N}$. By the definition
of Landau's function $g$, there is a permutation $a \in S_{N}$ of order at most $g(N)$ with $a = \varphi(f)$, i.e.
$\mathrm{ord}(a) \leq g(N)$, in other words, $\exists n\leq g(N) : a^{n} = 1_{\{1,\dots,N\}}$. For the same $n$ we have
$f^{n} = (\varphi^{-1}a)^{n} = \varphi^{-1}(a^{n}) = \varphi^{-1}(1_{\{1,\dots,N\}}) = 1_{M}$.\\
In \textit{(2)} we proved that $f\restrict{\mathrm{Im}(f^{m})}$ is bijective on $\mathrm{Im}(f^{m})$, therefore an element of
$S_{\mathrm{Im}(f^{m})}$ and we can find with the same argument as above an upper bound $g(N') \leq g(N), N' := \abs{\mathrm{Im}(f^{m})}$
since $\mathrm{Im}(f^{m}) \subseteq M$. This gives us an upper bound for $n$ in the general case.\\
For an upper bound for $m$ let's imagine an example with $m=11$ and $n=1$:\\

%m=11, n=1
\begin{tikzpicture}[->,>=stealth',auto,node distance=1cm,
  thick,main node/.style={circle,draw,font=\sffamily\Large\bfseries}]

  % nodes on the leg of sigma
  \node[main node] (1) [circle, fill, inner sep=2pt] {};
  \node[main node] (2) [left of=1, circle, fill, inner sep=2pt] {};
  \node[main node] (3) [left of=2, circle, fill, inner sep=2pt] {};
  \node[main node] (4) [left of=3, circle, fill, inner sep=2pt] {};
  \node[main node] (5) [left of=4, circle, fill, inner sep=2pt] {};
  \node[main node] (6) [left of=5, circle, fill, inner sep=2pt] {};
  \node[main node] (7) [left of=6, circle, fill, inner sep=2pt] {};
  \node[main node] (8) [left of=7, circle, fill, inner sep=2pt] {};
  \node[main node] (9) [left of=8, circle, fill, inner sep=2pt] {};
  \node[main node] (10) [left of=9, circle, fill, inner sep=2pt] {};
  \node[main node] (11) [left of=10, circle, fill, inner sep=2pt] {};
  \node[main node] (12) [left of=11, circle, fill, inner sep=2pt] {};
  
  % draw the circle
  
  \path[every node/.style={font=\sffamily\small}]
    % arrows on the leg of sigma
    (1) edge[-] node [left] {} (12)
    (1) edge["$f^{0} = 1_{M}$"', pos=0.60, out=300, in=40, min distance=7mm, looseness=8] (1)
    (12) edge["$f^{11+1}$"', pos=0.60, out=140, in=220, min distance=7mm, looseness=8] (12)
    (1) edge["$f^{1}$"', bend right] node [right] {} (2)
    (2) edge["$f^{2}$"', bend right] node [right] {} (3)
    (3) edge["$f^{3}$"', bend right] node [right] {} (4)
    (4) edge["$f^{4}$"', bend right] node [right] {} (5)
    (5) edge["$f^{5}$"', bend right] node [right] {} (6)
    (6) edge["$f^{6}$"', bend right] node [right] {} (7)
    (7) edge["$f^{7}$"', bend right] node [right] {} (8)
    (8) edge["$f^{8}$"', bend right] node [right] {} (9)
    (9) edge["$f^{9}$"', bend right] node [right] {} (10)
    (10) edge["$f^{10}$"', bend right] node [right] {} (11)
    (11) edge["$f^{11}$"', bend right] node [right] {} (12);
\end{tikzpicture}\\

If by $f^{10}$ we had already nine distinct functions $f^{1},\dots,f^{9}$ with no repetitions, and also the inclusions
$M \supsetneq \mathrm{Im}(f) \supsetneq \mathrm{Im}(f^{2}) \supsetneq \dots \supsetneq \mathrm{Im}(f^{9})$, we can only have
so many proper subsets of M. If in the chain of images, $|\mathrm{Im}(f^{k+1})| = |\mathrm{Im}(f^{k})| - 1$ then after
$m = \abs{M}$ steps the set $\mathrm{Im}(f^{m})$ is a singleton and the next function $f : \mathrm{Im}(f^{m}) \rightarrow \mathrm{Im}(f^{m})$
is forced to be bijective.
\end{subproof}
\end{proof}

\begin{example}{(Endomorphism $f$ satisfying the relation $f^{m+n} = f^{m}$)}
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item For any $m, n \in \mathbb{N}, n\geq 1$ we can find a finite set $M$ and an endomorphism $f \in \mathrm{End}_{\mathrm{FinSet}}(M)$
with $f^{m+n} = f^{m}$:\\
Let $\Bbbk$ be a field, e.g. $\Bbbk :=\{\cdot,1\}$, then on the vector space $V := \Bbbk^{m+n}$ with
standard basis $B = \{e_{1},\dots,e_{m+n}\}$ we can define the endomorphism $f$ via the companion matrix $\mathcal{M}_{p}$ to the polynomial
$p(x) = x^{m+n}-x^{m} \in \Bbbk[x]$. This matrix defines an endomorphism\\
$f : \{1,\dots,m+n\} \rightarrow \{1,\dots,m+n\}; 1 \mapsto 2, 2\mapsto 3, \dots, m+n-1 \mapsto m+n, m+n \mapsto m+1$
on the finite set $M := \{1,\dots,m+n\}$ satisfying $f^{m+n} = f^{m}$.
\item For $m = 3$ and $n = 5$ that is the matrix
\[
\mathcal{M}_{x^{8}-x^{3}} = \begin{pmatrix}
\cdot & \cdot & \cdot & \cdot & \cdot & \cdot & \cdot & \cdot \\
1 & \cdot & \cdot & \cdot & \cdot & \cdot & \cdot & \cdot \\
\cdot & 1 & \cdot & \cdot & \cdot & \cdot & \cdot & \cdot \\
\cdot & \cdot & 1 & \cdot & \cdot & \cdot & \cdot & \cdot \\
\cdot & \cdot & \cdot & 1 & \cdot & \cdot & \cdot & \cdot \\
\cdot & \cdot & \cdot & \cdot & 1 & \cdot & \cdot & 1 \\
\cdot & \cdot & \cdot & \cdot & \cdot & 1 & \cdot & \cdot \\
\cdot & \cdot & \cdot & \cdot & \cdot & \cdot & 1 & \cdot
\end{pmatrix}
\]
which has $p(x) = x^{3+5}-x^{3}$ as its minimal polynomial, i.e. $\mathcal{M}_{p}^{3+5} = \mathcal{M}_{p}^{3}$. The endomorphism of
vector spaces can be restricted to an endomorphism of the set of standard basis elements $\{e_{1},\dots,e_{8}\}$,
\[
f : \{e_{1},\dots,e_{8}\} \rightarrow \{e_{1},\dots,e_{8}\}; e_{1} \mapsto e_{2}, e_{2} \mapsto e_{3},\dots, e_{7} \mapsto e_{8}, e_{8}
\mapsto e_{6}
\]
and satisfies $f^{3+5} = f^{3}$.
\end{enumerate}
\end{example}

With the $\sigma$ lemma \ref{la:sigma-lemma} as a tool in our toolbox, we can tackle the problem of the free category generated by a finite
quiver of $\mathrm{FinSets}$ with endomorphisms.\\
Recall definition \ref{def:path_algebra} of the path algebra $\Bbbk q$ of a quiver $q$, which is the
$\Bbbk$-vector space with basis set of all paths in $q$ and concatenation of composable paths as multiplication. By lemma \ref{la:cyclic_paths} one cyclic
path, i.e. an endomorphism, in $q$ is enough for there to be infinitely many paths, i.e. $\Bbbk q$ is infinite-dimensional.

Our algorithm can deal with endomorphism monoids that are explicitly cyclic.

\begin{definition}[Cyclic quiver]\label{def:cyclic_quiver}
We call a quiver $q$ with relations \ul{cyclic}, if it has at most one loop at each vertex and the endomorphism monoid of
each vertex in the category generated by $q$ is generated by the corresponding loop in the quiver. We call the
category generated by $q$ a category with \ul{explicitly cyclic endomorphism monoids}.
\end{definition}

We will give some examples and counterexamples of cyclic quivers and which arrow's existence violates the above condition.

\begin{example}{(Examples and counterexamples for cyclic quivers)}
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item A cyclic quiver

\[
\begin{minipage}{.10\textwidth}
\phantom{}
\end{minipage}
\begin{minipage}{.30\textwidth}
\begin{tikzcd}
{X} \arrow["a"', loop, distance=2em, in=305, out=235] \arrow[rr, "b"] &  & {Y} \arrow["c"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.15\textwidth}
$\xrightarrow{\text{     }F\text{     }}$
\end{minipage}
%
\begin{minipage}{.35\textwidth}
\begin{tikzcd}
{X} \arrow["{a,a^{2},\dots}"', loop, distance=2em, in=305, out=235] \arrow[rr, "b", shift left] \arrow[rr, "{\begin{matrix} \text{$a^{m}bc^{n}$}
\\ \text{$(m,n\in\mathbb{N})$} \end{matrix}}"', shift right] &  & {Y} \arrow["{c,c^{2},\dots}"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\end{minipage}
%
\begin{minipage}{.10\textwidth}
\phantom{}
\end{minipage}
\]
\item This quiver is not cyclic.
\[
\begin{tikzcd}
X \arrow["a"', loop, distance=2em, in=305, out=235] \arrow[rr, "b", bend left] &  & Y \arrow["c"', loop, distance=2em, in=305, out=235] \arrow[ll, "d", bend left] & {} \arrow[r, "F"] & {} & X \arrow["{\begin{matrix}a,a^{2},\dots, \\ (bd),(bd)^{2},\dots, \\ a(bd),\dots \end{matrix}}"', loop, distance=2em, in=305, out=235] \arrow[rr, "{b,\dots}", bend left] &  & Y \arrow[ll, "{d,\dots}", bend left] \arrow["{\begin{matrix} c,c^{2},\dots, \\(db),(db)^{2},\dots, \\ (db)c(db),\dots \end{matrix}}"', loop, distance=2em, in=305, out=235]
\end{tikzcd}
\]
With the path $bd : X \rightarrow X$ we have two paths
$a, bd \in \mathrm{End}_{Fq}(X)$ and thus an endomorphism monoid that is generated by two generators $a$ and $bd$, and thus is
not explicitly cyclic.\endnote{(The difference between the two quivers (1) and (2) is that the first one has some sense of order. Object $Y$ comes
\textit{after} $X$ in the sense that you have an arrow from $X$ to $Y$, but not the other way around. If $a$ and $c$ were the identity morphisms,
then (1) would be an example for a \ul{poset} or partially ordered set, i.e. a category such that for any pair of objects $x, y$ there is at most one
morphism from $x$ to $y$, and if there is a morphism from $x$ to $y$ and a morphism from $y$ to $x$, then $x = y$, i.e. the objects are equal.
An exercise for the reader could be to formulate the exact relations between posets and cyclic quivers)}
\item The first quiver from example \ref{ex:U-F-U-F_from_singleton} is cyclic:\\
\[
\begin{tikzcd}
\ast \arrow["a"', loop, distance=2em, in=305, out=235] & {} \arrow[r, "F"] & {} & \ast \arrow["a"', loop, distance=2em, in=305, out=235] \arrow["1_{\ast}"', loop, distance=2em, in=125, out=55] \arrow["{{a^{2}, a^{3},\dots}}"', loop, distance=2em, in=35, out=325]
\end{tikzcd}
\]
\item But after another forgetful functor $U$ the underlying quiver is not cyclic:\\
\[
\begin{tikzcd}
\ast \arrow["{a, b, c,\dots}"', loop, distance=2em, in=305, out=235] & {} \arrow[r, "F"] & {} & \ast \arrow["{a, b, c,\dots}"', loop, distance=2em, in=305, out=235] \arrow["1_{\ast}"', loop, distance=2em, in=125, out=55] \arrow["{a^{2},\dots,ab,\dots,ababbaba,\dots,b^{2},\dots,c^{2},\dots}"', loop, distance=2em, in=35, out=325]
\end{tikzcd}
\]
\end{enumerate}
\end{example}

\begin{definition}{(Ideal of an algebra)}\label{def:ideal_of_algebra}
Let $\mathcal{A}$ be a $\Bbbk$-algebra over a field $\Bbbk$.
A subset $L \subset \mathcal{A}$ is a \ul{left ideal} of $\mathcal{A}$, denoted $L \vartriangleleft \mathcal{A}$, if for every $x, y \in L$,
$z \in \mathcal{A}$ and $c \in \Bbbk$ we have the following three statements:
\begin{align}
x + y &\in L\, \text{ ($L$ is closed under addition) },\label{eq:ideal_cl_add} \\
cx &\in L\, \text{ ($L$ is closed under scalar multiplication) }, \label{eq:ideal_cl_scm} \\
z \cdot x &\in L\, \text{ ($L$ is closed under left multiplication by arbitrary elements) }. \label{eq:ideal_cl_lm}
\end{align}
\noindent If \eqref{eq:ideal_cl_lm} were replaced with
\begin{align}
x \cdot z \in L\, \text{ ($L$ is closed under right multiplication by arbitrary elements) }, \label{eq:ideal_cl_rm}
\end{align}
then this would define a \ul{right ideal}.
A \ul{two-sided ideal} is a subset that is both a left and a right ideal.
\end{definition}

\begin{remark}{(Ideal of a unital algebra)}
If in \ref{def:ideal_of_algebra} $\mathcal{A}$ is a unital associative algebra with unit $e$, then we only need statements
(1) and (3). The statement (2) follows from (3).
\end{remark}
\begin{proof}
For $c \in \Bbbk$ and $x\in L$, $ce \in \mathcal{A}$ and with (3) we have $L \ni (ce)\cdot x = c(e\cdot x) = cx$, i.e. (2).
\end{proof}

\begin{remark}
Let $\mathcal{A}$ be a unital $\Bbbk$-algebra, and $\mathcal{I} \unlhd \mathcal{A}$ a two-sided ideal.
The \ul{quotient algebra} of$\mathcal{A}$ modulo $\mathcal{I}$ is the set
\[
\mathcal{A}\,/\,\mathcal{I} := \{ z + I : z \in \mathcal{A} \}
\]
of cosets $z + I$
together with the operations of addition, scalar multiplication and multiplication defined respectively for all
$z+I, w+I \in \mathcal{A}\,/\,\mathcal{I}$ by:
\begin{alignat}{3}
+ &: (z+I) + (w+I) &&:= (z+w)+I \\
\cdot &: \lambda \cdot (z+I) &&:= (\lambda z)+I \\
\cdot &: (z+I) \cdot (w+I) &&:= (zw)+I
\end{alignat}
These operations are independend of the representatives.
\end{remark}
\begin{proof}
Two cosets $(z+I), (z'+I)$ are equal iff $z-z' \in I$.
Let $z, z'\in z+I$ and $w, w' \in w+I$ be two representatives for $z+I$ and $w+I$ respectively, and let $\lambda \in \Bbbk$.
Therefore $z-z' \in I$ and $w-w' \in I$.
\begin{align}
(z+w) - (z'+w') = (z-z') + (w-w') \in I\, \text{ by \eqref{eq:ideal_cl_add} }\, \Rightarrow (z+w)+I = (z'+w')+I.\\
\lambda z - \lambda z' = \lambda(z-z') \in I\, \text{ by \eqref{eq:ideal_cl_scm} }\, \Rightarrow (\lambda z)+I = (\lambda z')+I.
\end{align}
For well-definedness of multiplication, let $z' = z + i_{1}$ and $w' = w + i_{2}$ with $i_{1}, i_{2} \in I$. Then
\begin{align}
zw - z'w' &= zw - (z+i_{1})(w+i_{2}) \\
&= zw - zw -zi_{2} -i_{1}w -i_{1}i_{2} \\
&= -zi_{2} -i_{1}w -i_{1}i_{2} \in I, \\
\Rightarrow zw+I &= z'w'+I
\end{align}
because of \eqref{eq:ideal_cl_add}, \eqref{eq:ideal_cl_scm} and the closure under left and right multiplication \eqref{eq:ideal_cl_lm} and
\eqref{eq:ideal_cl_rm}.
\end{proof}

\begin{remark}{(Relations of Endomorphisms)}
Let the generating quiver $q$ of our finite concrete category $\mathcal{C}$ be explicitly cyclic with one generating endomorphism
$\alpha_{i} : M_{i} \rightarrow M_{i}$ for each finite set $M_{i} \in \mathcal{C}_{0}, i = 1,\dots,N, N := \abs{\mathcal{C}_{0}}$.

The algorithm $\mathtt{RelationsOfEndomorphism}$ calculates a list of relations as generators of the ideal
\begin{equation}
\left< \alpha_{1}^{m_{1}+n_{1}} - \alpha_{1}^{m_{1}}, \dots, \alpha_{N}^{m_{N}+n_{N}} - \alpha_{N}^{m_{N}} \right>
\unlhd \Bbbk q. \label{eq:ideal_of_endos}
\end{equation}
From the $\sigma$-lemma \ref{la:sigma-lemma} we know that each relation is of the form $\alpha_{i}^{m_{i}+n_{i}} - \alpha_{i}^{m_{i}}$
for some natural numbers $m_{i}, n_{i} \in \mathbb{N}_{0}$. Especially with $n_{i} \geq 1$, the ideal in \eqref{eq:ideal_of_endos} is not the
zero ideal (provided that the $\alpha_{i} \neq 0$).

With the list of relations of endomorphisms
\[
\mathtt{relsEndo} := ( \alpha_{1}^{m_{1}+n_{1}} - \alpha_{1}^{m_{1}}, \dots, \alpha_{N}^{m_{N}+n_{N}} - \alpha_{N}^{m_{N}} )
\]
that we got from our algorithm, we can calculate the quotient algebra by the ideal generated by $\mathtt{relEndo}$,
\[
\mathcal{A} := \Bbbk q \, / \, \mathtt{relsEndo}.
\]
This is a finite-dimensional $\Bbbk$-algebra with a distinct set of idempotents.
In the following subsection we show that this is equivalent to a $\Bbbk$-linear category (also called $\kAlgebroid$).
\end{remark}

\begin{algorithm}[H]\capstart
    \caption{\texttt{RelationsOfEndomorphisms}}\label{algo:RelationsOfEndomorphisms}
	\SetKwInput{Input}{~Input}
	\SetKwInput{Output}{~Output}
	\Input{~a commutative ring $k$ and a finite concrete category $C$}
	\Output{~the endomorphism relations of the category $C$ given as generators of an ideal of the path algebra}
	\BlankLine
	$q := \mathtt{RightQuiverFromConcreteCategory}(C)$\;
	$kq := \mathtt{PathAlgebra}(k, q)$\;
	$gMor := \mathtt{SetOfGeneratingMorphisms}(C)$\;
	$A := \mathtt{Arrows}(q)$\;
	$relsEndo := \emptyset$\;
	\For{$i = 1, \dots, \mathtt{Length}(gMor)$}{
	    let $mor := gMor_i$\\
	    \If{\Not{$\mathtt{IsEndomorphism}(mor)$}}{
		continue\;
	    }
	    $m := 0$\;
	    $mPowers := \emptyset$\;
	    $foundEqual := \mathtt{false}$\;
	    \While{$mor^{m}\notin mPowers$}{
		let $n := 1$\;
	    	$nPowers := \emptyset$\;
		\While{\Not{} $foundEqual$ \AndAlg{} $mor^{(m+n)} \notin nPowers$}{
		    \If{$mor^{(m+n)} = mor^{m}$}{
		    	Add the relation $kq.(A_{i})^{(m+n)}-kq.(A_{i})^{m}$ to relsEndo\;
		    	$foundEqual := \mathtt{true}$\;
		    }
		    Add $mor^{(m+n)}$ to mpowers\;
		    n := n+1\;
		}
		Add $mor^{m}$ to mpowers\;
		m := m+1\;
	    }
	}
	\Return{relsEndo}\;
\end{algorithm}

%% 
\newpage
\subsection{$\Bbbk$-linear categories, $\Bbbk$-algebroids and $\Bbbk$-algebras with orthogonal idempotents}

\begin{definition}[$\Bbbk$-linear category, $\Bbbk$-$\mathrm{algebroid}$]
Let $\Bbbk$ be a commutative unital ring. A \ul{$\Bbbk$-linear category}, also called \ul{$\Bbbk$-$\mathrm{algebroid}$},$\,\mathcal{A}$ is a
category where every hom-set is a $\Bbbk$-module, and where for $x,y,z \in \mathcal{A}_{0}$ composition of morphisms
\[
\mu : \mathrm{Hom}_{\mathcal{A}}(x,y) \times \mathrm{Hom}_{\mathcal{A}}(y,z) \rightarrow \mathrm{Hom}_{\mathcal{A}}(x,z)
\]
is $\Bbbk$-bilinear.

Note that this does imply that $\mathcal{A}$ is an Ab-category, but it need not be additive nor does it need to have a zero object.
\end{definition}

\begin{doctrine}[$\Bbbk$-algebroid]
The doctrine $\mathtt{IsAlgebroid}$ also known as\\
$\mathtt{IsLinearCategoryOverCommutativeRing}$ involves algorithms for $\mathtt{IsAbCategory}$ and
\begin{itemize}
\item $\mathtt{MultiplyWithElementOfCommutativeRingForMorphisms}$.
\end{itemize}
\end{doctrine}

\begin{definition}{($\Bbbk$-linear functor)}
Let $\Bbbk$ be a commutative ring. A \ul{functor of $\Bbbk$-linear categories} or a \ul{$\Bbbk$-linear functor} is a functor
$F : \mathcal{A} \rightarrow \mathcal{B}$ between $\Bbbk$-linear categories $\mathcal{A}$ and $\mathcal{B}$,
where for all objects $x, y \in \mathcal{A}_{0}$, the map
\[
F : \mathrm{Hom}_{\mathcal{A}}(x,y) \rightarrow \mathrm{Hom}_{\mathcal{B}}(F(x), F(y))
\]
is a homomorphism of $\Bbbk$-modules.
\end{definition}

\noindent We can associate to any category a $\Bbbk$-linear category called its $\Bbbk$-linear closure:

\begin{definition}{($\Bbbk$-linear closure of a category)}
Let $\mathcal{C}$ be a category, and $\Bbbk$ a commutative unital ring. We define $\Bbbk \mathcal{C}$ to be
the $\Bbbk$-algebroid with the same object set as $\mathcal{C}$ and with 
\[
\mathrm{Hom}_{\Bbbk\mathcal{C}}(a,b) = \bigoplus_{\varphi \in \mathrm{Hom}_{\mathcal{C}}(a,b)} \Bbbk \cdot \varphi,
\]
the free $\Bbbk$-module on the set of free generators $\mathrm{Hom}_{\mathcal{C}}(a,b)$. We call $\Bbbk\mathcal{C}$ the
\ul{$\Bbbk$-linear closure} of $\mathcal{C}$.
\end{definition}

\begin{definition}{(Idempotent)}\label{def:idempotent}
Let $\mathbf{A}$ be a unital algebra over the commutative ring $\Bbbk$.
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item An element $e\in \mathbf{A}$ is an \ul{idempotent} if $e^{2} = e$.
\item If $e_{1}, e_{2} \in \mathbf{A}$ are idempotents, then we will say that they are \ul{orthogonal} iff $e_{1}e_{2} = e_{2}e_{1} = 0$.
\item An idempotent is called \ul{trivial} if it is either $0$ or $1$.
\item An idempotent $e \in \mathbf{A}$ is called \ul{primitive} if $e = e_{1} + e_{2}$ with idempotents $e_{1}, e_{2}$, then
$e_{1}$ or $e_{2}$ is trivial.
\item A finite set $\{e_{1},\dots,e_{n}\}$ of orthogonal idempotents is called \ul{complete} if $\sum_{i=1}^{n} e_{i} = 1$.
\end{enumerate}
\end{definition}

\begin{proposition}\label{prop:idempotent}
Let $\mathbf{A}$ be a unital algebra over the commutative ring $\Bbbk$, and 
$M_{1},\dots,M_{n}$ $\mathbf{A}$-submodules of $\mathbf{A}$ such that
\begin{align}
\mathbf{A} = \bigoplus_{i=1}^{n} M_{i},
\end{align}
i.e.
\begin{align}
\mathbf{A} &= \{ m_{1} + \dots + m_{n} : m_{i} \in M_{i} \}\, \text{ and }\\
M_{i} \cap M_{j} &= \{0\}\, \text{ if }\, i\neq j 
\end{align}
Write $1 = \sum_{i=1}^{n} e_{i}$ for some $e_{i} \in M_{i}$. Then the $e_{i}$ are orthogonal idempotents in $\mathbf{A}$, and
\begin{align}
M_{i} = \mathbf{A} e_{i},\, 1\leq i \leq n.
\end{align}
Furthermore, $M_{i}$ is indecomposable as a module if and only if $e_{i}$ is primitive.
\end{proposition}
\begin{proof}[Proof\nopunct]
\begin{subproof}[that the $e_{i}$ are orthogonal idempotents]
\phantom{}\\
\begin{align}
1 &= \sum_{i=1}^{n} e_{i}\\
e_{j} &= e_{j}\sum_{i=1}^{n} e_{i} = e_{j}^{2} + \sum_{i\neq j} e_{j} e_{i}
\end{align}
Since we can write $e_{j} = m_{1} + \dots + m_{n}$ in a unique way with $m_{j} \in M_{j}$, it follows that
\begin{align}
e_{j} = m_{j} = e_{j}^{2}\, \text{ and }\\
m_{i} = e_{j} e_{i} = 0\,\forall i \neq j,
\end{align}
i.e. the $e_{j}$ are orthogonal idempotents in $\mathbf{A}$.
\end{subproof}
\begin{subproof}[Proof that $M_{i} = \mathbf{A}e_{i}$]\phantom{}\\
Since the $M_{i}$ are $\mathbf{A}$-submodules, they are already closed under multiplication by elements in $\mathbf{A}$.
So with $e_{i} \in M_{i}$ we have $ze_{i} \in M_{i}\, \forall z \in \mathbf{A}$, i.e. $\mathbf{A}e_{i} \subseteq M_{i}$.
We only have to show the other inclusion.
\setlist[description]{font=\normalfont}
\begin{description}
\item[``$\subseteq$:''] Let $x \in M_{i}$. We are done, if we show that $x = xe_{i}$. With $1 = \sum_{i=1}^{n} e_{i}$ we have
\begin{align}
x &= x1 = x\sum_{j=1}^{n} e_{j} = xe_{i} + \sum_{j\neq i} xe_{j}
\end{align}
By the above, we have $xe_{j} \in M_{j}$ for $j\neq i$, and since $x \in M_{i}$, we again have the unique sum $x = m_{1} + \dots + m_{n}$
with $m_{i} = xe_{i}$ and $m_{j} = xe_{j} = 0$ for $j \neq i$. Therefore $x = xe_{i}$, i.e. $M_{i} \subseteq \mathbf{A}e_{i}$.
\end{description}
\end{subproof}
\begin{subproof}[Proof of equivalence $M_{i}$ indecomposable $\Leftrightarrow$ $m_{i}$ primitive]\phantom{}\\
\setlist[description]{font=\normalfont}
\begin{description}
\item[``$\Rightarrow$:''] Let $M_{i}$ be indecomposable. Let $m_{i} = n + p$ for some idempotent $n, p \in \mathbf{A}$. Then
$M_{i} = m_{i}\mathbf{A} = (n+p)\mathbf{A} = \{nx + py : x,y \in \mathbf{A}\} = n\mathbf{A} \oplus p\mathbf{A}$. Since $M_{i}$ was
indecomposable, it follows that $n\mathbf{A} = \{0\} \vel p\mathbf{A} = \{0\}$. Therefore $n = 0 \vel p = 0$, i.e. $m_{i}$ is primitive.

\item[``$\Leftarrow$:''] Let $m_{i}$ be primitive. Let $m_{i}\mathbf{A} = M_{i} = N \oplus P$. Since
\[
\mathbf{A} = \bigoplus_{j=1}^{n} M_{j} = \bigoplus_{\begin{smallmatrix}j=1,\\ j \neq i\end{smallmatrix}}^{n} M_{j} \oplus (N \oplus P)
\]
there exist orthogonal idempotent $n, p \in \mathbf{A}$ such that $N = n\mathbf{A}$ and $P = p\mathbf{A}$ and also
$1 = \sum_{j=1}^{n} m_{j} = \sum_{j\neq i} m_{j} + n + p$. Therefore $m_{i} = n + p$. With $m_{i}$ primitive, we have
$n = 0 \vel p = 0$, and therefore $M_{i} = \{0\} \oplus (p\mathbf{A}) \vel M_{i} = (n\mathbf{A}) \oplus \{0\}$, i.e. $M_{i}$ is indecomposable.
\end{description}
\end{subproof}
\end{proof}

A unital associative $\Bbbk$-algebra is a $\Bbbk$-algebroid with one object.
Let $\Bbbk$ be a commutative unital ring and $\mathbf{A}$ a unital associative algebra over $\Bbbk$. This defines a category $\mathcal{A}$
with a single object $\ast$ and the morphisms being the elements of the algebra, which are all endomorphisms since there is only one object.
Composition of morphisms is defined by the multiplication in $\mathbf{A}$, which is assumed to be associative.
The unit $e$ of the algebra acts as the identity morphism. The set $\{ e \}$ is trivially a set of orthogonal idempotents.
The hom-set $\mathrm{Hom}_{\mathcal{A}}(\ast,\ast) = \mathrm{End}_{\mathcal{A}}(\ast)$ is the whole algebra $\mathbf{A}$, which is
a $\Bbbk$ module with bilinear multiplication as composition, i.e. $\mathcal{A}$ is a $\kAlgebroid$.

\begin{proposition}\label{prop:Alg-Alg-Correspondence}
Each $\Bbbk$-algebra $\mathbf{A}$ with $\{e_{1},\dots,e_{n}\}$ a finite complete system of (not necessarily primitive) orthogonal
idempotents defines a $\Bbbk$-algebroid $\mathcal{A}$ with object set $\mathcal{A}_{0} := \{1,\dots,n\}$. More precisely:
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item The set of morphisms between two objects $i,j$ is defined as
$\mathrm{Hom}_{\mathcal{A}}(i,j) := e_{i}\mathbf{A}e_{j}$, i.e. a morphism is an element
$e_{i}\mathbf{A}e_{j} \ni \alpha = e_{i}ae_{j}, a\in \mathbf{A}$.
It follows that the identity morphism $1_{i} = e_{i}$ for $1\leq i \leq n$.

\item $\mathbf{A} := \mathrm{Algebra}(\mathcal{A}) := \bigoplus_{i,j} \mathrm{Hom}_{\mathcal{A}}(i,j)$ is again a unital algebra with
multiplication 
\[
\varphi_{i,j} \cdot \psi_{k,l} := \begin{cases}\varphi_{i,j} \psi_{k,l} & \text{ if } j = k\\
0 \in \mathbf{A} & \text{ if } j \neq k, \end{cases}
\]
where the first case is the composition in the algebroid. It follows that $1 = \sum_{i} 1_{i}$ is the multiplicative identity of $\mathbf{A}$.

\end{enumerate}
These two constructions are mutually inverse.
\end{proposition}
\begin{proof}
\begin{enumerate}
\renewcommand{\labelenumi}{(\theenumi)}
\item We can write $\mathbf{A}$ as
\[
\mathbf{A} = 1\mathbf{A}1 = \left(\sum_{i}e_{i}\right) \mathbf{A} \left(\sum_{j} e_{j}\right) = \bigoplus_{i,j} e_{i}\mathbf{A}e_{j},
\]
which is a direct sum decomposition of $\mathbf{A}$ in $\Bbbk$-submodules. The last sum is a direct sum:
\begin{align}
e_{i}\mathbf{A}e_{j} &\cap e_{i'}\mathbf{A}e_{j'} = \delta_{i,i'} \cdot \delta_{j,j'},\,\text{ since }\\
x &= e_{i} \cdot a \cdot e_{j} = e_{i'} \cdot b \cdot e_{j'} \\
x &= \underbrace{e_{i}e_{i}}_{e_{i}} \cdot a \cdot e_{j} = \underbrace{e_{i}e_{i'}}_{= 0} \cdot b \cdot e_{j'},\, &e_{i} \neq e_{i'} \\
x &= e_{i} \cdot a \cdot \underbrace{e_{j}e_{j}}_{e_{j}} = e_{i'} \cdot b \cdot \underbrace{e_{j'}e_{j}}_{= 0},\, &e_{j} \neq e_{j'}
\end{align}

\item Composition of morphisms
$i \xrightarrow{\alpha} j \xrightarrow{\beta} k$ is defined by the multiplication in $\mathbf{A}$.
Let $\alpha = e_{i}ae_{j}, \beta = e_{j}be_{k}$ with $a, b\in \mathbf{A}$. Then
\begin{align}
\alpha \beta &= (e_{i}ae_{j})(e_{j}be_{k}) \\
&= e_{i}(ae_{j}b)e_{k} \\
&= e_{i}ce_{k}\,\text{ with }\, c := ae_{j}b \in \mathbf{A}.
\end{align}
Associativity of composition follows from associativity of multiplication in $\mathbf{A}$.

\item It's an easy exercise to see that the above defined $1$ is indeed a multiplicative unit of the algebra $\mathbf{A}$.
We define $M_{i} := \bigoplus_{j=1}^{n} \mathrm{Hom}_{\mathcal{A}}(j,i)$ an $\mathbf{A}$-submodule of $\mathbf{A}$.
Then $\mathbf{A} = \bigoplus_{i=1}^{n} M_{i}$ as in Proposition \ref{prop:idempotent} and it follows that the idempotent $e_{i} = 1_{i}$.
\end{enumerate}
\end{proof}

\begin{definition}{(Path algebra of a quiver)}\label{def:path_algebra}
We define the \ul{path algebra} of a quiver $q$ over a commutative ring $\Bbbk$ by
\[
\Bbbk q := \mathrm{Algebra}( \Bbbk Fq ),
\]
where $Fq$ is the free category of the quiver $q$ from definition \ref{def:free_category}.
\end{definition}

\begin{lemma}\label{la:path_algebra_is_ass_algebra}
For a quiver $q$ and a field $\Bbbk$, the path algebra $\Bbbk q$ is an associative $\Bbbk$-algebra.\endnote{(From \cite{[leit4]} 4.1)}
\end{lemma}
\begin{proof}
Let $w, w', w''$ be paths. Then both $(ww')w''$ and $w(w'w'')$ are the concatenation of $w$ on the left,
$w'$ in the middle and $w''$ on the right, in case both conditions $t(w) = s(w')$ and $t(w') = s(w'')$ are satisfied, and
otherwise the zero element (since $(ww')0 = 0, 0(w'w'') = 0$, according to bilinearity).\\
Since the multiplication was defined on a basis and extended bilinearly, the axioms of an algebra are clearly satisfied.
\end{proof}

\begin{lemma}\label{la:unit_in_path_algebra}
If the set of vertices of a quiver $q_{0}$ is finite, then $\Bbbk q$ has a unit element $\sum_{x\in q_{0}} e_{x}$. In this case, $\Bbbk q$ is a unital
associative algebra, i.e. a unital ring that is also a vector space.\endnote{(From \cite{[leit4]} 4.1)}
\end{lemma}
\begin{proof}
Let $e := \sum_{x\in q_{0}} e_{x}$. Let $w$ be a path with $s(w) = x$ and $t(w) = y$, then $e_{x}w = w$ and $e_{z}w = 0$ for all $z \neq x$,
thus $ew = e_{x}w + \sum_{z\neq x} e_{z}w = w + 0 = w$. Similarly, $we_{y} = w$ and $we_{z} = 0$ for $z \neq x$.
\end{proof}

\begin{computation}[The $\Bbbk$-linear closure of the finite concrete category $C_{3}C_{3}C_{3}$]\phantom{}\\
\begin{Verbatim}[commandchars=!@|,fontsize=\small,frame=single,label=Example]
  !gapprompt@gap>| !gapinput@LoadPackage( "CatReps" );|
  true
  !gapprompt@gap>| !gapinput@c3c3c3 := ConcreteCategoryForCAP(|
  !gapprompt@>| !gapinput@                  [ [2,3,1], [4,5,6], [,,,5,6,4],|
  !gapprompt@>| !gapinput@                    [,,,7,8,9], [,,,,,,8,9,7], [7,8,9] ] );|
  A finite concrete category
  !gapprompt@gap>| !gapinput@objects := SetOfObjects( c3c3c3 );|
  [ An object in subcategory given by: <An object in FinSets>,
    An object in subcategory given by: <An object in FinSets>,
    An object in subcategory given by: <An object in FinSets> ]
  !gapprompt@gap>| !gapinput@gmorphisms := SetOfGeneratingMorphisms( c3c3c3 );|
  [ A morphism in subcategory given by: <A morphism in FinSets>,
    A morphism in subcategory given by: <A morphism in FinSets>,
    A morphism in subcategory given by: <A morphism in FinSets>,
    A morphism in subcategory given by: <A morphism in FinSets>,
    A morphism in subcategory given by: <A morphism in FinSets>,
    A morphism in subcategory given by: <A morphism in FinSets> ]
  !gapprompt@gap>| !gapinput@q := RightQuiverFromConcreteCategory( c3c3c3 );|
  q(3)[a:1->1,b:1->2,c:2->2,d:2->3,e:3->3,f:1->3]
  !gapprompt@gap>| !gapinput@Q := HomalgFieldOfRationals();|
  Q
  !gapprompt@gap>| !gapinput@kq := PathAlgebra( Q, q );|
  Q * q
  !gapprompt@gap>| !gapinput@IsFiniteDimensional( kq );|
  false
  !gapprompt@gap>| !gapinput@relEndo := RelationsOfEndomorphisms( Q, c3c3c3 );|
  [ 1*(a*a*a) - 1*(1), 1*(c*c*c) - 1*(2), 1*(e*e*e) - 1*(3) ]
  !gapprompt@gap>| !gapinput@kq := kq / relEndo;|
  (Q * q) / [ 1*(a*a*a) - 1*(1), 1*(c*c*c) - 1*(2), 1*(e*e*e) - 1*(3) ]
  !gapprompt@gap>| !gapinput@IsFiniteDimensional( kq );|
  true
  !gapprompt@gap>| !gapinput@A := Algebroid( Q, c3c3c3 );|
  Algebroid generated by the right quiver
  q(3)[a:1->1,b:1->2,c:2->2,d:2->3,e:3->3,f:1->3]
  !gapprompt@gap>| !gapinput@kq := UnderlyingQuiverAlgebra( A );|
  (Q * q) / [ 1*(a*a*a) - 1*(1), 1*(c*c*c) - 1*(2), 1*(e*e*e) - 1*(3), \
  -1*(b*c) + 1*(a*b), -1*(b*d) + 1*(f), -1*(f*e) + 1*(a*f), -1*(d*e) + 1*(c*d) ]
  !gapprompt@gap>| !gapinput@unit := kq.1+kq.2+kq.3;|
  { 1*(3) + 1*(2) + 1*(1) }
  !gapprompt@gap>| !gapinput@unit * kq.a = kq.a;|
  true
  !gapprompt@gap>| !gapinput@kq.f * unit = kq.f;|
  true
\end{Verbatim}
\end{computation}

